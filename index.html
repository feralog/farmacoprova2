<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Quiz Educacional</title>
  <!-- O título será dinamicamente atualizado pelo JavaScript baseado no QUIZ_ID -->
  <!-- Bootstrap CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background-color: #f8f9fa; padding-top: 20px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    .quiz-container { max-width: 800px; margin: 0 auto; background: #fff; border-radius: 10px; box-shadow: 0 0 20px rgba(0,0,0,0.1); padding: 30px; }
    .timer { position: fixed; top: 10px; right: 10px; background: #007bff; color: #fff; padding: 10px 15px; border-radius: 25px; font-weight: bold; z-index: 1000; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
    .option { cursor: pointer; padding: 15px; margin: 10px 0; border-radius: 8px; border: 1px solid #dee2e6; transition: all .3s; }
    .option:hover { background: #f1f8ff; border-color: #b8daff; }
    .correct { background: #d4edda !important; border-color: #c3e6cb !important; color: #155724; }
    .incorrect { background: #f8d7da !important; border-color: #f5c6cb !important; color: #721c24; }
    .explanation { background: #e9ecef; padding: 15px; border-radius: 8px; margin-top: 15px; display: none; }
    .question-list-item { cursor: pointer; padding: 15px; margin: 10px 0; border-radius: 8px; border: 1px solid #dee2e6; background: #f8f9fa; }
    .question-detail { background: #fff; padding: 15px; border-radius: 8px; margin-top: 10px; display: none; }
    .leaderboard-table { width: 100%; margin-top: 20px; }
    .section { display: none; }
    .active { display: block; }
    h1, h2, h3 { color: #0056b3; }
    .btn-next { display: none; }
    .continue-quiz { margin-top: 20px; }
  </style>
</head>
<body>

<div id="timer" class="timer" style="display:none;">00:00</div>

<div class="container quiz-container">
  <!-- TELA INICIAL -->
  <section id="start-section" class="section active">
    <h1 class="text-center mb-4" id="quiz-title">Título do Seu Quiz</h1>
    <div class="mb-3">
      <label for="username" class="form-label">Digite seu nome:</label>
      <input type="text" class="form-control" id="username" placeholder="Seu nome">
    </div>
    <button id="start-button" class="btn btn-primary btn-lg w-100">Iniciar Quiz</button>
    <button id="continue-button" class="btn btn-success btn-lg w-100 continue-quiz" style="display:none;">Continuar Quiz</button>
    <button id="clear-progress-button" class="btn btn-outline-danger btn-lg w-100 mt-3" style="display:none;">Limpar Progresso Salvo</button>
  </section>

  <!-- TELA QUIZ -->
  <section id="quiz-section" class="section">
    <h2 id="question-number" class="mb-3"></h2>
    <h3 id="question-text" class="mb-4"></h3>
    <div id="options-container"></div>
    <div id="explanation" class="explanation"></div>
    <button id="next-button" class="btn btn-primary mt-3 btn-next">Próxima Questão</button>
  </section>

  <!-- RESULTADOS -->
  <section id="results-section" class="section">
    <h2 class="text-center mb-4">Resultado Final</h2>
    <div class="alert alert-primary">
      <strong id="final-score"></strong>
      <div id="final-time" class="mt-2"></div>
    </div>
    <h3 class="mb-3">Suas respostas:</h3>
    <div id="questions-list"></div>
    <h3 class="mt-4 mb-3">Classificação</h3>
    <div class="table-responsive">
      <table class="table table-striped leaderboard-table">
        <thead>
          <tr><th>#</th><th>Nome</th><th>Pontuação</th><th>Tempo</th></tr>
        </thead>
        <tbody id="leaderboard-body"></tbody>
      </table>
    </div>
    <button id="restart-button" class="btn btn-primary btn-lg w-100 mt-4">Voltar ao Início</button>
  </section>
</div>

<!-- Bootstrap Bundle -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

<script>
  // === IDENTIFICADOR ÚNICO DO QUIZ - ALTERE PARA CADA TEMA DIFERENTE ===
  const QUIZ_ID = "Farmacologia"; // Altere para cada questionário (ex: "parasitologia", "farmacologia", etc.)
  
  // Atualiza o título da página baseado no QUIZ_ID
  document.title = "Quiz " + QUIZ_ID.charAt(0).toUpperCase() + QUIZ_ID.slice(1);
  
  // Também atualiza o título no corpo da página
  document.addEventListener('DOMContentLoaded', () => {
    document.getElementById('quiz-title').textContent = "Quiz " + QUIZ_ID.charAt(0).toUpperCase() + QUIZ_ID.slice(1);
  });
  
  // === QUESTÕES DO QUIZ - SUBSTITUA ESTE ARRAY PELAS NOVAS QUESTÕES ===
  const questions = [
    // Exemplo de objeto de questão
    {
    question: "Qual das seguintes afirmações descreve corretamente a COX-2, segundo o material?",
    options: [
      "É continuamente estimulada em todos os tecidos.",
      "Está presente apenas em plaquetas e rins.",
      "Sua produção é induzida por citocinas inflamatórias e fatores de crescimento.",
      "Mantém a produção constante de muco gástrico.",
      "É inibida exclusivamente pelo ácido acetilsalicílico."
    ],
    correctIndex: 2,
    explanation: "O texto aponta que a COX-2 é \"induzida\" e tem a produção estimulada por citocinas inflamatórias."
  },
  {
    question: "A principal função fisiológica das prostaglandinas geradas pela COX-1 é:",
    options: [
      "Estimular a resposta imune em tecidos lesionados.",
      "Manter processos básicos como proteção gástrica e fluxo renal.",
      "Promover hiperalgesia periférica.",
      "Regular a secreção de ACTH na hipófise.",
      "Aumentar a secreção de aldosterona."
    ],
    correctIndex: 1,
    explanation: "Prostaglandinas da COX-1 mantêm muco gástrico, regulação ácido-base e fluxo renal."
  },
  {
    question: "Segundo o slide de classificação, qual fármaco é altamente seletivo para COX-2?",
    options: [
      "Ibuprofeno",
      "Piroxicam",
      "Celecoxib",
      "Aspirina",
      "Indometacina"
    ],
    correctIndex: 2,
    explanation: "Celecoxib aparece sob o subtítulo \"Inibidores altamente seletivos da COX-2\"."
  },
  {
    question: "O ácido araquidônico converte-se em prostaglandinas primariamente por meio de:",
    options: [
      "Glicocorticoides",
      "Fosfolipase A2",
      "Ciclo-oxigenases COX-1 e COX-2",
      "Lipoxigenases",
      "Monoaminoxidases"
    ],
    correctIndex: 2,
    explanation: "O fluxograma mostra COX-1 e COX-2 como enzimas centrais na cascata do ácido araquidônico."
  },
  {
    question: "Entre as doenças-alvo listadas para tratamento com AINEs está:",
    options: [
      "Hipertireoidismo",
      "Artrite",
      "Doença de Addison",
      "Hepatite viral",
      "Doença de Cushing"
    ],
    correctIndex: 1,
    explanation: "O slide \"Doenças – alvo\" cita Artrite como um dos alvos."
  },
  {
    question: "Qual desses AINEs é classificado como derivado do ácido fenilacético?",
    options: [
      "Diclofenaco",
      "Naproxeno",
      "Nimesulida",
      "Cetoprofeno",
      "Ácido mefenâmico"
    ],
    correctIndex: 0,
    explanation: "Diclofenaco é listado como substância representante dos derivados do ácido fenilacético."
  },
  {
    question: "A reação adversa GI (dispepsia/úlcera) é especialmente associada a:",
    options: [
      "Inibição da COX-1 no estômago",
      "Bloqueio de receptores H2",
      "Ativação de lipocortina-1",
      "Ação seletiva sobre COX-3",
      "Aumento da síntese de prostaciclina"
    ],
    correctIndex: 0,
    explanation: "A inibição da COX-1 reduz prostaglandinas protetoras gástricas, predispondo a lesão GI."
  },
  {
    question: "Sobre o ácido acetilsalicílico (AAS), é correto afirmar que ele:",
    options: [
      "Tem má absorção por via oral.",
      "É excretado exclusivamente pela bile.",
      "Distribui-se amplamente, incluindo leite materno e placenta.",
      "Não sofre metabolização hepática.",
      "Inibe apenas a COX-2."
    ],
    correctIndex: 2,
    explanation: "O slide de salicilatos indica distribuição ampla nos tecidos, leite materno e placenta."
  },
  {
    question: "O slide sobre efeitos colaterais do diclofenaco menciona como efeito mais frequente:",
    options: [
      "Hipoglicemia",
      "Trombocitopenia",
      "Cefaleia",
      "Bradicardia",
      "Neutrofilia"
    ],
    correctIndex: 2,
    explanation: "Cefaleia aparece entre os efeitos comuns listados para derivados do ácido fenilacético."
  },
  {
    question: "Qual fármaco NÃO foi citado como derivado do ácido propiônico?",
    options: [
      "Naproxeno",
      "Fenoprofeno",
      "Ibuprofeno",
      "Diclofenaco",
      "Cetoprofeno"
    ],
    correctIndex: 3,
    explanation: "Diclofenaco pertence ao grupo fenilacético, não ao propiônico."
  },
  {
    question: "Bi-Profenid® está associado quimicamente a:",
    options: [
      "Ácido mefenâmico",
      "Cetoprofeno",
      "Diclofenaco",
      "Celecoxib",
      "Nimesulida"
    ],
    correctIndex: 1,
    explanation: "Bi-Profenid é nome comercial do cetoprofeno, derivado do ácido propiônico."
  },
  {
    question: "Entre as contraindicações do Bi-Profenid destacam-se doenças:",
    options: [
      "Gastrointestinais e distúrbios de coagulação",
      "Pulmonares obstrutivas crônicas",
      "Endócrinas como hipotireoidismo",
      "Renais policísticas",
      "Neurológicas desmielinizantes"
    ],
    correctIndex: 0,
    explanation: "O slide lista doença GI e alteração da coagulação como contraindicações."
  },
  {
    question: "Qual substância foi descrita como inibidor fraco de prostaglandinas com mecanismo analgésico noradrenérgico central?",
    options: [
      "Ácido mefenâmico",
      "Ácido tolfenâmico",
      "Nimesulida",
      "Ácido etofenâmico",
      "Ácido flufenâmico"
    ],
    correctIndex: 0,
    explanation: "Os fenamatos exibem essa descrição, e o ácido mefenâmico é citado primeiro."
  },
  {
    question: "O trometamol cetorolaco é indicado principalmente para:",
    options: [
      "Longos tratamentos de artrite reumatoide",
      "Dor aguda moderada a grave, inclusive pós-operatória",
      "Controle crônico de hipertensão arterial",
      "Profilaxia de enxaqueca",
      "Redução da febre em pediatria"
    ],
    correctIndex: 1,
    explanation: "O slide descreve o uso via oral/parenteral em dor aguda moderada a grave."
  },
  {
    question: "Segundo o material, qual NÃO é um efeito adverso sistêmico importante dos AINEs?",
    options: [
      "Necrose papilar renal",
      "Disfunção plaquetária",
      "Icterícia",
      "Hipotireoidismo",
      "Úlcera péptica"
    ],
    correctIndex: 3,
    explanation: "Hipotireoidismo não é citado nos efeitos adversos listados."
  },
  {
    question: "Celecoxibe é indicado para todas as condições abaixo, EXCETO:",
    options: [
      "Osteoartrite",
      "Espondilite anquilosante",
      "Cólica renal aguda",
      "Artrite reumatoide",
      "Dismenorreia primária"
    ],
    correctIndex: 2,
    explanation: "Cólica renal não aparece entre as indicações fornecidas para celecoxibe."
  },
  {
    question: "O mecanismo dos AINEs baseia-se principalmente na inibição de:",
    options: [
      "Fosfolipase C",
      "Ciclo-oxigenase",
      "Hidroxilase de vitamina D",
      "DNA-giratase",
      "Monoamina-oxidase B"
    ],
    correctIndex: 1,
    explanation: "O slide \"Mecanismo dos anti-inflamatórios\" descreve inibição das ciclo-oxigenases."
  },
  {
    question: "Aumento do risco de infarto do miocárdio foi associado sobretudo a:",
    options: [
      "Inibidores seletivos da COX-2",
      "AINEs tradicionais não seletivos",
      "Paracetamol",
      "Ácido mefenâmico",
      "Inibidores da COX-3"
    ],
    correctIndex: 0,
    explanation: "Os slides sobre segurança cardiovascular apontam efeitos adversos com inibidores seletivos da COX-2."
  },
  {
    question: "Qual propriedade NÃO pertence ao acetaminofeno segundo o texto?",
    options: [
      "Metabolização hepática",
      "Excreção renal",
      "Ação sobre COX-3 proposta",
      "Inibição da agregação plaquetária",
      "Absorção lenta e irregular"
    ],
    correctIndex: 4,
    explanation: "O texto afirma absorção rápida, não lenta e irregular."
  },
  {
    question: "Os AINEs seletivos para a COX-2 são chamados:",
    options: [
      "Salicilatos",
      "Coxibes",
      "Fenamatos",
      "Propionatos",
      "Corticoides"
    ],
    correctIndex: 1,
    explanation: "O resumo final define COXIBEs como AINEs seletivos para COX-2."
  },
  {
    question: "A zona fasciculada da glândula suprarrenal é responsável pela produção principal de:",
    options: [
      "Aldosterona",
      "Epinefrina",
      "Cortisol",
      "Renina",
      "Somatostatina"
    ],
    correctIndex: 2,
    explanation: "O diagrama mostra a zona fasciculada formando glicocorticoides como cortisol."
  },
  {
    question: "A secreção de aldosterona é estimulada diretamente por:",
    options: [
      "ACTH",
      "Angiotensina II",
      "CRH",
      "Glucagon",
      "FSH"
    ],
    correctIndex: 1,
    explanation: "O slide destaca angiotensina II como estímulo primário de aldosterona."
  },
  {
    question: "Entre os efeitos adversos crônicos dos glicocorticoides destaca-se:",
    options: [
      "Leucocitose pronunciada",
      "Hiponatremia grave",
      "Osteoporose",
      "Bradicardia persistente",
      "Neuropatia óptica"
    ],
    correctIndex: 2,
    explanation: "O texto lista osteoporose como importante efeito adverso dos corticoides."
  },
  {
    question: "A síndrome de Cushing pode resultar de:",
    options: [
      "Hipofunção adrenal",
      "Administração crônica de glicocorticoides",
      "Deficiência de ACTH",
      "Bloqueio de mineralocorticoides",
      "Jejum prolongado"
    ],
    correctIndex: 1,
    explanation: "Hiperfunção por uso prolongado de glicocorticoides está entre as causas listadas."
  },
  {
    question: "O fármaco tópico NASONEX® (furoato de mometasona) alcança benefício máximo em:",
    options: [
      "30 minutos",
      "1 a 2 dias",
      "1 a 2 semanas",
      "4 semanas",
      "8 horas"
    ],
    correctIndex: 2,
    explanation: "O slide indica benefício máximo após 1 a 2 semanas de uso."
  },
  {
    question: "Qual via de administração NÃO foi citada para glicocorticoides no material?",
    options: [
      "Oral",
      "Intramuscular",
      "Intravenosa contínua",
      "Tópica/pulmonar",
      "Nenhuma das anteriores"
    ],
    correctIndex: 2,
    explanation: "O slide menciona oral, IM e tópica/pulmonar; não há referência a infusão IV contínua."
  },
  {
    question: "A indução da síntese de lipocortina-1 pelos corticoides resulta, principalmente, em:",
    options: [
      "Aumento de prostaglandinas",
      "Inibição da fosfolipase A2",
      "Elevação de aldosterona",
      "Estimulação da COX-1",
      "Supressão da ACTH"
    ],
    correctIndex: 1,
    explanation: "Lipocortina-1 inibe fosfolipase A2, reduzindo mediadores inflamatórios."
  },
  {
    question: "Raciocínio: Um paciente com histórico de úlcera péptica necessita de AINE para osteoartrite. Com base nas informações, o fármaco com menor risco GI é:",
    options: [
      "Ibuprofeno (não seletivo)",
      "Celecoxibe (COX-2 seletivo)",
      "Aspirina em altas doses",
      "Diclofenaco (fenilacético)",
      "Piroxicam (COX-1 seletivo)"
    ],
    correctIndex: 1,
    explanation: "A inibição seletiva da COX-2 foi criada para reduzir efeitos GI, apesar de riscos CV."
  },
  {
    question: "Raciocínio: Para um paciente com doença cardiovascular estabelecida, qual conduta se alinha ao texto ao prescrever inibidor da COX-2?",
    options: [
      "Utilizar doses baixas e pelo menor tempo possível.",
      "Prescrever dose máxima crônica.",
      "Substituir por AAS em altas doses.",
      "Associar diclofenaco não seletivo diariamente.",
      "Suspender todos os analgésicos."
    ],
    correctIndex: 0,
    explanation: "O texto recomenda uso restrito, doses baixas e curta duração em pacientes de alto risco CV."
  },
  {
    question: "Raciocínio: Um atleta apresenta dor aguda intensa após cirurgia ortopédica. Segundo o material, escolha o AINE mais indicado:",
    options: [
      "Trometamol cetorolaco parenteral",
      "Ácido mefenâmico oral prolongado",
      "Celecoxibe para uso crônico",
      "Acetaminofeno isolado",
      "Fenacetina"
    ],
    correctIndex: 0,
    explanation: "O texto destaca cetorolaco para tratamento curto de dor aguda moderada a grave pós-operatória."
  },
  {
    question: "Raciocínio: Em paciente com hipertensão mal controlada, qual efeito adverso dos AINEs pode piorar o quadro?",
    options: [
      "Dispepsia",
      "Agranulocitose",
      "Retenção de sal e água",
      "Zumbidos",
      "Hipocalemia"
    ],
    correctIndex: 2,
    explanation: "O slide de efeitos adversos menciona retenção de sal/água e aumento de pressão arterial."
  },
  {
    question: "Raciocínio: Se um glicocorticoide potente sem retenção hídrica for necessário, o material sugere usar:",
    options: [
      "Hidrocortisona",
      "Prednisona",
      "Dexametasona",
      "Aldosterona",
      "Cetoprofeno"
    ],
    correctIndex: 2,
    explanation: "Betametasona e dexametasona são mencionadas como potentes e sem retenção de sal/água."
  },
  {
    question: "Raciocínio: Um paciente diabético em terapia prolongada com corticoide deverá ser monitorado prioritariamente para:",
    options: [
      "Hiponatremia",
      "Hipoglicemia",
      "Osteoporose e hiperglicemia",
      "Bradicardia",
      "Anemia megaloblástica"
    ],
    correctIndex: 2,
    explanation: "Efeitos adversos incluem diabetes esteroidal e osteoporose, necessitando monitorização."
  },
  {
    question: "Raciocínio: Qual opção melhor explica por que o uso isolado de COX-2 seletivos aumentou eventos cardiovasculares?",
    options: [
      "Aumentam tromboxano plaquetário sem prostaciclina vascular protetora.",
      "Diminuem todas as prostaglandinas incluindo tromboxano.",
      "Inibem a agregação plaquetária como a aspirina.",
      "Reduzem síntese de lipocortina-1.",
      "Induzem vasodilatação excessiva."
    ],
    correctIndex: 0,
    explanation: "Desequilíbrio entre prostaciclina (vasodilatadora) e tromboxano (pro-trombótico) leva a risco CV."
  },
	{
    question: "Qual termo se refere a qualquer composto que interage com receptores opioides, independentemente da origem?",
    options: ["Opioide", "Opiáceo", "Narcótico", "Analgésico não-opioide", "Antagonista"],
    correctIndex: 0,
    explanation: "O texto define ‘opioide’ como todo composto, natural ou sintético, que age em receptores opioides."
  },
  {
    question: "A morfina é extraída diretamente de qual parte da papoula, segundo a farmacologia básica dos opioides?",
    options: ["Sementes maduras secas", "Goma de ópio obtida do látex da cápsula", "Folhas desidratadas", "Raízes trituradas", "Pólen coletado"],
    correctIndex: 1,
    explanation: "Após a incisão na cápsula, o látex se transforma em ópio; dele se isola a morfina."
  },
  {
    question: "Qual receptor apresenta maior afinidade pela morfina e responde predominantemente pela analgesia supraespinal?",
    options: ["δ (delta)", "κ (kappa)", "μ (mu)", "σ (sigma)", "ORL-1"],
    correctIndex: 2,
    explanation: "A morfina é agonista integral do receptor μ, principal sítio de analgesia."
  },
  {
    question: "De acordo com a revisão, a principal diferença entre um analgésico em geral e um AINE é que:",
    options: ["Os AINEs nunca reduzem febre", "Analgésicos não afetam prostaglandinas enquanto AINEs as inibem", "AINEs aumentam a condução nociceptiva", "Analgésicos apenas aliviam dor, enquanto AINEs também têm ação anti-inflamatória", "AINEs agem exclusivamente em receptores opioides"],
    correctIndex: 3,
    explanation: "A dupla ação analgésica e anti-inflamatória distingue os AINEs dos simples analgésicos."
  },
  {
    question: "Quais fármacos representam os AIES (corticosteroides) mencionados no material?",
    options: ["Dipirona e Ibuprofeno", "Tramadol e Codeína", "Fentanil e Metadona", "Morfina e Oxicodona", "Prednisona e Dexametasona"],
    correctIndex: 4,
    explanation: "Os AIES correspondem aos corticosteroides como prednisona e dexametasona."
  },
  {
    question: "A ação pré-sináptica típica de um agonista µ na medula espinhal é:",
    options: ["Reduzir o influxo de Ca²⁺, diminuindo a liberação de neurotransmissores", "Bloquear canais de Na⁺ e impedir a despolarização", "Aumentar a liberação de substância P", "Inativar a bomba Na⁺/K⁺-ATPase", "Estimular entrada de Cl⁻ nos neurônios pós-sinápticos"],
    correctIndex: 0,
    explanation: "Agonistas µ fecham canais de Ca²⁺ pré-sinápticos, reduzindo a liberação de transmissores excitatórios."
  },
  {
    question: "Qual par de fármacos apresenta boa eficácia por via oral devido ao metabolismo de primeira passagem relativamente reduzido?",
    options: ["Morfina e Buprenorfina", "Codeína e Oxicodona", "Fentanil e Remifentanila", "Tramadol e Metadona", "Naloxona e Naltrexona"],
    correctIndex: 1,
    explanation: "O texto destaca codeína e oxicodona como eficazes por via oral."
  },
  {
    question: "Qual é o principal fármaco utilizado para reverter intoxicações por agonistas opioides?",
    options: ["Morfina", "Tramadol", "Naloxona", "Buprenorfina", "Metadona"],
    correctIndex: 2,
    explanation: "Naloxona é antagonista não seletivo dos receptores opioides e reverte a depressão respiratória."
  },
  {
    question: "Por que a dose oral de morfina costuma ser maior que a intravenosa para alcançar o mesmo efeito?",
    options: ["Baixa solubilidade em lipídios", "Conjugação direta no sangue", "Intenso efeito de primeira passagem hepática", "Biodisponibilidade renal elevada", "Depuração pulmonar rápida"],
    correctIndex: 3,
    explanation: "Grande parte da morfina é metabolizada no fígado antes de atingir a circulação sistêmica."
  },
  {
    question: "Em insuficiência renal crônica, qual metabólito da morfina pode acumular-se e excitar o SNC?",
    options: ["Morfina-3-glicuronídeo", "Morfina-4-sulfato", "Normorfina", "Heroína", "Morfina-6-glicuronídeo"],
    correctIndex: 4,
    explanation: "O acúmulo de morfina-6-glicuronídeo em falência renal provoca neuroexcitação."
  },
  {
    question: "Que característica farmacocinética torna a buprenorfina segura em pacientes com disfunção renal?",
    options: ["Não se acumula porque depende de metabolismo hepático e eliminação predominantemente biliar", "É altamente hidrossolúvel e excretada inalterada", "Possui meia-vida inferior a 2 h", "Depende de depuração renal ativa", "É inativada pela flora intestinal"],
    correctIndex: 0,
    explanation: "Buprenorfina é metabolizada no fígado e pouco afetada pela função renal."
  },
  {
    question: "A potência analgésica aproximada do fentanil em relação à morfina é:",
    options: ["Duas vezes maior", "Cem vezes maior", "Igual", "Metade", "Dez vezes menor"],
    correctIndex: 1,
    explanation: "O slide afirma potência ~100× superior à morfina."
  },
  {
    question: "O tramadol costuma exigir quanto tempo para impregnação adequada em uso crônico?",
    options: ["1–2 dias", "14 dias", "3–7 dias", "Mais de 30 dias", "Nenhum – ação imediata"],
    correctIndex: 2,
    explanation: "São necessários 3–7 dias para estabilização plasmática do tramadol."
  },
  {
    question: "Sobre a metadona, o material destaca que ela:",
    options: ["Tem biodisponibilidade oral baixa", "É menos potente que a morfina", "Possui potência 1,8 × maior que a morfina e boa biodisponibilidade oral", "É excretada exclusivamente pelos pulmões", "Não apresenta potencial de abuso"],
    correctIndex: 3,
    explanation: "A metadona supera a morfina em potência e é bem absorvida por via oral."
  },
  {
    question: "A principal via de excreção dos metabólitos polares conjugados dos opioides é:",
    options: ["Fígado", "Pulmões", "Glândulas salivares", "Suor", "Rins"],
    correctIndex: 4,
    explanation: "Após conjugação, os metabólitos são eliminados predominantemente pelos rins."
  },
  {
    question: "Qual efeito adverso dos opioides dificilmente desenvolve tolerância com o uso prolongado?",
    options: ["Constipação", "Náuseas", "Sedação", "Miose", "Euforia"],
    correctIndex: 0,
    explanation: "A constipação persiste porque os efeitos sobre o trato gastrointestinal não geram tolerância."
  },
  {
    question: "Segundo a farmacologia básica, aproximadamente que fração do ópio bruto corresponde à morfina?",
    options: ["1 %", "10 %", "25 %", "50 %", "80 %"],
    correctIndex: 1,
    explanation: "O ópio contém cerca de 10 % de morfina."
  },
  {
    question: "A variabilidade interindividual na dose oral necessária de morfina decorre principalmente de:",
    options: ["Ligação a proteínas plasmáticas", "Metabolismo de primeira passagem", "Diferenças na barreira hematoencefálica", "Polimorfismo do receptor µ", "Taxa de excreção biliar"],
    correctIndex: 2,
    explanation: "O metabolismo hepático de primeira passagem varia muito entre indivíduos."
  },
  {
    question: "A liberação de peptídeos opioides endógenos pode ser induzida por:",
    options: ["Hiperglicemia aguda", "Hipotermia leve", "Dor, estresse e antecipação de dor", "Exposição ao frio extremo", "Alcalose metabólica"],
    correctIndex: 3,
    explanation: "O texto descreve dor e estresse como estímulos à liberação de peptídeos endógenos."
  },
  {
    question: "Qual exemplo de agonista-antagonista misto citado no material?",
    options: ["Morfina", "Fentanil", "Naloxona", "Oximorfona", "Nalbufina"],
    correctIndex: 4,
    explanation: "A Nalbufina é mencionada como opioide de ação agonista-antagonista."
  },
  {
    question: "Raciocínio: Paciente com dor neuropática moderada falhou ao paracetamol. Qual analgésico do texto é o próximo passo mais adequado?",
    options: ["Tramadol", "Codeína", "Ibuprofeno", "Dipirona", "Fentanil"],
    correctIndex: 0,
    explanation: "O tramadol é citado como eficaz em dor neuropática (2º degrau analgésico)."
  },
  {
    question: "Raciocínio: Paciente com insuficiência renal avançada precisa de analgesia potente. Qual opioide abaixo minimiza risco de acúmulo tóxico?",
    options: ["Morfina", "Buprenorfina", "Codeína", "Metadona", "Oximorfona"],
    correctIndex: 1,
    explanation: "Buprenorfina não se acumula em insuficiência renal, sendo opção segura."
  },
  {
    question: "Raciocínio: Durante intubação de emergência, qual fármaco garante analgesia rápida, curta duração e alta potência, conforme descrito?",
    options: ["Tramadol", "Metadona", "Fentanil", "Codeína", "Dipirona"],
    correctIndex: 2,
    explanation: "Fentanil apresenta início rápido e curta duração, ideal para procedimentos agudos."
  },
  {
    question: "Raciocínio: Para sedação analgésica ajustável em UTI, o texto destaca principalmente o uso de:",
    options: ["Buprenorfina", "Tramadol", "Morfina", "Remifentanila", "Celecoxibe"],
    correctIndex: 3,
    explanation: "Remifentanila permite titulação fina e recuperação rápida em ventilação mecânica."
  },
  {
    question: "Raciocínio: Qual justificativa fisiológica explica a possibilidade de parada respiratória em superdosagem de agonistas µ?",
    options: ["Inibição do centro vasomotor", "Estímulo do centro da tosse", "Ativação de receptores δ", "Inibição da COX-2 cerebral", "Diminuição da sensibilidade dos quimiorreceptores centrais ao CO₂"],
    correctIndex: 4,
    explanation: "Agonistas µ suprimem o drive respiratório, reduzindo a resposta ao CO₂."
  },
  {
    question: "Raciocínio: Para reverter rapidamente intoxicação opioide no pré-hospitalar, qual via de administração da naloxona é mais prática e efetiva?",
    options: ["Intranasal", "Oral", "Retal", "Transdérmica", "Sublingual"],
    correctIndex: 0,
    explanation: "Formulações intranasais de naloxona têm absorção rápida e uso fácil fora do hospital."
  },
  {
    question: "Raciocínio: Paciente em uso crônico de morfina desenvolveu alucinações e mioclonias. Qual mecanismo descrito pode justificar o quadro?",
    options: ["Ativação de receptores κ", "Acúmulo de morfina-3-glicuronídeo neuroexcitante", "Inibição excessiva de GABA", "Bloqueio dos canais de Ca²⁺ tipo T", "Aumento de endorfina endógena"],
    correctIndex: 1,
    explanation: "O metabólito M3G apresenta efeito neuroexcitante quando se acumula."
  },
  {
    question: "Raciocínio: Para analgesia sustentada em paciente que não tolera via oral, qual apresentação listada é apropriada?",
    options: ["Injeção IV de fentanil", "Comprimido sublingual de naloxona", "Adesivo transdérmico de buprenorfina", "Spray nasal de heroína", "Supositório de dipirona"],
    correctIndex: 2,
    explanation: "Adesivos de buprenorfina liberam o fármaco continuamente por dias."
  },
  {
    question: "Raciocínio: Paciente com dor intensa, mas alto risco de dependência, pode beneficiar-se de qual agente agonista-antagonista de faixa estreita?",
    options: ["Morfina", "Codeína", "Metadona", "Buprenorfina", "Fentanil"],
    correctIndex: 3,
    explanation: "Buprenorfina é agonista-parcial e reduz risco de dependência comparada a agonistas integrais."
  },
  {
    question: "Raciocínio: Qual combinação de características justifica o uso da metadona em programas de substituição para dependentes de heroína?",
    options: ["Potência baixa e meia-vida ultracurta", "Via oral ineficaz", "Bloqueio competitivo de receptores µ", "Ação exclusivamente antitussígena", "Meia-vida longa, boa biodisponibilidade oral e agonismo integral µ"],
    correctIndex: 4,
    explanation: "A longa meia-vida e boa absorção oral permitem doses espaçadas, prevenindo abstinência."
  },
{
    question: "Qual é a origem etimológica da palavra 'anestesia' mencionada no material?",
    options: [
      "Latim — \"an\" (sem) + \"aisthesis\" (sensação)",
      "Árabe — \"ana\" (corpo) + \"stesia\" (sono)",
      "Grego — \"an\" (sem) + \"aisthesis\" (sensação)",
      "Sânscrito — \"ana\" (morte) + \"stesia\" (ausência)",
      "Hebraico — \"ana\" (dormir) + \"stesia\" (corpo)"
    ],
    correctIndex: 2,
    explanation: "O texto indica que anestesia vem do grego e significa ausência de sensações."
  },
  {
    question: "Segundo os objetivos de um anestésico geral, qual item NÃO faz parte da lista apresentada?",
    options: [
      "Sedação",
      "Analgesia",
      "Supressão de reflexos indesejáveis",
      "Aumento do tônus muscular esquelético",
      "Amnésia"
    ],
    correctIndex: 3,
    explanation: "O relaxamento — e não o aumento — da musculatura esquelética é desejado."
  },
  {
    question: "Quantos estágios clássicos de profundidade anestésica são descritos no material?",
    options: ["Dois", "Três", "Quatro", "Cinco", "Seis"],
    correctIndex: 2,
    explanation: "Analgesia, excitação, anestesia cirúrgica e paralisia bulbar compõem quatro estágios."
  },
  {
    question: "Qual coeficiente sangue/gás (COEP) aproximado é atribuído ao sevoflurano?",
    options: ["0,24", "0,47", "0,59", "1,9", "2,7"],
    correctIndex: 2,
    explanation: "O slide de sevoflurano informa COEP ≈ 0,59."
  },
  {
    question: "Entre as desvantagens do halotano, uma destacada no slide é:",
    options: [
      "Potente vasoconstritor coronariano",
      "Hepatotoxicidade e risco de hipertermia maligna",
      "Recuperação extremamente lenta",
      "Excitação respiratória severa",
      "Hipertensão arterial marcada"
    ],
    correctIndex: 1,
    explanation: "Halotano pode causar depressão CV, hepatotoxicidade e precipitar HM."
  },
  {
    question: "O texto define hipertermia maligna como reação associada principalmente a:",
    options: [
      "Barbitúricos IV",
      "Opioides fortes",
      "Anestésicos voláteis e suxametônio",
      "Benzodiazepínicos de longa ação",
      "Propofol em infusão prolongada"
    ],
    correctIndex: 2,
    explanation: "HM ocorre com halogenados voláteis ou bloqueador despolarizante suxametônio."
  },
  {
    question: "Qual agente IV listado possui janela terapêutica estreita, sem efeito analgésico e acumula em tecido adiposo?",
    options: ["Propofol", "Etomidato", "Tiopental", "Quetamina", "Midazolam"],
    correctIndex: 2,
    explanation: "O slide de Tiopental descreve essas características."
  },
  {
    question: "O antagonista receptor predominante de quetamina é:",
    options: [
      "GABA-A",
      "Glicina",
      "NMDA",
      "AMPA",
      "Nicotínico muscular"
    ],
    correctIndex: 2,
    explanation: "Quetamina é antagonista não-competitivo dos receptores NMDA."
  },
  {
    question: "Entre os efeitos cardiovasculares dos anestésicos inalatórios citados, o isoflurano destaca-se por:",
    options: [
      "Aumentar a pressão arterial sistólica",
      "Ser potente vasodilatador",
      "Bloquear o nódulo AV",
      "Induzir bradicardia severa",
      "Aumentar pós-carga ventricular"
    ],
    correctIndex: 1,
    explanation: "Isoflurano é descrito como potente vasodilatador."
  },
  {
    question: "Qual combinação de drogas é listada como adjuvante para reduzir secreções e prevenir bradicardia?",
    options: [
      "Benzodiazepínico + ondansetrona",
      "Anticolinérgico + relaxante muscular",
      "Omeprazol + anti-histamínico",
      "Anticolinérgico isolado",
      "Opioide + benzodiazepínico"
    ],
    correctIndex: 1,
    explanation: "O quadro de fármacos adjuvantes inclui anticolinérgicos (p. ex. atropina) e relaxantes."
  },
  {
    question: "A principal via de administração dos agentes descritos como 'inalatórios' é:",
    options: ["Oral", "Intramuscular", "Vapor aspirável", "Subcutânea", "Retal"],
    correctIndex: 2,
    explanation: "São gases ou vapores administrados por via inalatória."
  },
  {
    question: "O texto alerta que não existem antagonistas específicos para qual classe de anestésicos?",
    options: [
      "Inalatórios voláteis",
      "Opioides",
      "Benzodiazepínicos",
      "Barbitúricos",
      "Fenotiazinas"
    ],
    correctIndex: 0,
    explanation: "Índices terapêuticos estreitos dos inalatórios: nenhum antagonista dedicado disponível."
  },
  {
    question: "Qual fármaco IV descrito causa menor depressão cardiovascular e inibe a esteroidogênese?",
    options: [
      "Tiopental",
      "Etomidato",
      "Propofol",
      "Quetamina",
      "Fentanil"
    ],
    correctIndex: 1,
    explanation: "Etomidato preserva estabilidade cardiovascular mas reduz síntese de esteroides."
  },
  {
    question: "Entre os riscos pediátricos citados para óxido nitroso, destaca-se:",
    options: [
      "Anemia aplásica fetal",
      "Hipotonia neonatal por benzodiazepínico",
      "Bradicardia severa",
      "Hepatotoxicidade fulminante",
      "Convulsões recorrentes"
    ],
    correctIndex: 0,
    explanation: "Óxido nitroso pode induzir anemia aplásica no feto."
  },
  {
    question: "Qual vantagem do sevoflurano é enfatizada para procedimentos ambulatoriais?",
    options: [
      "Alta lipossolubilidade e indução lenta",
      "Baixo coeficiente sangue/gás e baixa irritação",
      "Potente efeito analgésico prolongado",
      "Redução de convulsões pós-op.",
      "Efeito anti-emético natural"
    ],
    correctIndex: 1,
    explanation: "COEP baixo (0,59) e não irritante favorecem uso em ambulatório."
  },
  {
    question: "Qual agente inalatÓrio possui COEP ~2,7, maior risco de hepatotoxicidade e foi amplamente usado desde 1956?",
    options: ["Sevoflurano", "Isoflurano", "Halotano", "Desflurano", "Enflurano"],
    correctIndex: 2,
    explanation: "Halotano apresenta esses detalhes no slide específico."
  },
  {
    question: "Quais fatores ligados ao paciente DEVEM ser avaliados antes da anestesia, de acordo com o fluxograma?",
    options: [
      "Apenas condição respiratória e neurológica",
      "Somente função renal",
      "Procedimento cirúrgico, condições médicas e função de órgãos essenciais",
      "Exclusivamente idade e peso",
      "Histórico familiar sem exames"
    ],
    correctIndex: 2,
    explanation: "O slide lista procedimento, comorbidades e função CV, respiratória, hepática, renal etc."
  },
  {
    question: "A 'fase de excitação' (estágio II) é caracterizada por:",
    options: [
      "Perda de tônus muscular com respiração regular",
      "Delírios e risco de laringoespasmo",
      "Paralisia bulbar e depressão vasomotora",
      "Bloqueio total da dor com vigília intacta",
      "Reflexos primitivos abolidos, mas paciente acordado"
    ],
    correctIndex: 1,
    explanation: "Estágio II envolve delírios e reflexos de vias aéreas hiperativos."
  },
  {
    question: "Por que propofol costuma reduzir a pressão intracraniana (PIC)?",
    options: [
      "Aumenta fluxo sanguíneo cerebral",
      "Promove vasodilatação sistêmica com queda de PAM",
      "Inibe receptores NMDA diretamente",
      "Potencializa transmissão glutamatérgica",
      "Diminui metabolismo cerebral e fluxo sanguíneo"
    ],
    correctIndex: 4,
    explanation: "Propofol diminui metabolismo cerebral → menor fluxo e redução de PIC."
  },
  {
    question: "Qual droga anestésica parenteral descrita promove 'anestesia dissociativa'?",
    options: ["Etomidato", "Propofol", "Quetamina", "Midazolam", "Tiopental"],
    correctIndex: 2,
    explanation: "Quetamina induz estado dissociativo (sedação, analgesia, amnésia)."
  },

  /* ---- Perguntas de raciocínio (10) ---- */

  {
    question: "Raciocínio: Paciente com cardiomiopatia grave necessita indução rápida com mínima depressão cardiovascular. Qual agente IV é mais apropriado?",
    options: [
      "Etomidato",
      "Propofol",
      "Tiopental",
      "Quetamina",
      "Isoflurano"
    ],
    correctIndex: 0,
    explanation: "Etomidato preserva estabilidade hemodinâmica, ideal em cardiopatas."
  },
  {
    question: "Raciocínio: Um cirurgião pede broncodilatação intraoperatória em asmático; qual anestésico inalatório escolhido facilitaria esse efeito e ainda permitiria recuperação rápida?",
    options: [
      "Halotano",
      "Sevoflurano",
      "Desflurano",
      "Enflurano",
      "Óxido Nitroso isolado"
    ],
    correctIndex: 1,
    explanation: "Sevoflurano é broncodilatador, tem indução/recuperação rápidas e baixo irritante."
  },
  {
    question: "Raciocínio: Mulher grávida na 10ª semana precisa de cirurgia breve. Qual agente inalatÓrio deve ser EVITADO devido a possível efeito teratogênico citado?",
    options: [
      "Isoflurano",
      "Óxido Nitroso",
      "Sevoflurano",
      "Desflurano",
      "Halotano"
    ],
    correctIndex: 1,
    explanation: "Óxido nitroso está associado a anemia aplásica fetal (teratogênico)."
  },
  {
    question: "Raciocínio: Durante cirurgia prolongada, o anestesista observa convulsões ao eletroencefalograma. Qual agente volátil é mais provável responsável?",
    options: [
      "Halotano",
      "Enflurano",
      "Sevoflurano",
      "Isoflurano",
      "Desflurano"
    ],
    correctIndex: 1,
    explanation: "Enflurano pode precipitar convulsões, conforme slide de desvantagens."
  },
  {
    question: "Raciocínio: Em paciente alcoólatra crônico (indutor enzimático), qual barbitúrico apresentado pode apresentar indução incompleta após doses subsequentes?",
    options: [
      "Tiopental",
      "Propofol",
      "Etomidato",
      "Quetamina",
      "Midazolam"
    ],
    correctIndex: 0,
    explanation: "Tolerância hepática ao tiopental reduz eficácia em alcoólatras devido indução enzimática."
  },
  {
    question: "Raciocínio: Qual combinação de adjuvantes seria MAIS útil para prevenir náuseas, proteger a mucosa gástrica e minimizar ansiedade pré-operatória?",
    options: [
      "Benzodiazepínico + omeprazol + anti-histamínico",
      "Relaxante muscular + ondansetrona",
      "Anticolinérgico + ranitidina",
      "Opioide + suxametônio",
      "Propofol sozinho"
    ],
    correctIndex: 0,
    explanation: "A tríade cobre ansiedade (BDZ), proteção gástrica (omeprazol) e alergia (anti-histamínico)."
  },
  {
    question: "Raciocínio: Qual é a justificativa para evitar halotano em paciente com hepatopatia pré-existente?",
    options: [
      "COEP baixo causa má indução",
      "Potente vasoconstritor pulmonar",
      "Risco elevado de hepatotoxicidade",
      "Aumenta demanda metabólica hepática",
      "OAção pró-convulsivante importante"
    ],
    correctIndex: 2,
    explanation: "Hepatotoxicidade é desvantagem central do halotano."
  },
  {
    question: "Raciocínio: Um paciente desenvolve rigidez muscular, febre súbita e hipercapnia após suxametônio. Qual MANEJO emergencial é primordial?",
    options: [
      "Administrar naloxona",
      "Suspender anestésico e resfriar, iniciar dantroleno",
      "Aplicar flumazenil",
      "Iniciar altas doses de propofol",
      "Ventilar com 100 % óxido nitroso"
    ],
    correctIndex: 1,
    explanation: "Conduta-padrão para hipertermia maligna envolve dantroleno e suporte intensivo."
  },
  {
    question: "Raciocínio: Para paciente idoso com reserva respiratória limitada, qual agente IV seria MENOS desejável pela maior depressão respiratória descrita?",
    options: [
      "Propofol",
      "Etomidato",
      "Quetamina",
      "Midazolam",
      "Dexmedetomidina"
    ],
    correctIndex: 0,
    explanation: "Slide afirma que propofol causa maior depressão respiratória do que tiopental."
  },
  {
    question: "Raciocínio: Se o objetivo é indução extremamente rápida (< 30 s) e amnésia, mas sem analgesia significativa, qual fármaco IV se encaixa?",
    options: [
      "Propofol",
      "Fentanil",
      "Tiopental",
      "Quetamina",
      "Etomidato"
    ],
    correctIndex: 0,
    explanation: "Propofol induz em 30–40 s, com amnésia, porém necessita adjuvante analgésico."
  },
{
    question: "Qual é o principal mecanismo de ação dos anestésicos locais descrito no material?",
    options: [
      "Bloqueio dos canais de sódio voltagem-dependentes",
      "Estímulo dos receptores GABA-A",
      "Inibição de cicloxigenases",
      "Bloqueio dos canais de cálcio tipo L",
      "Antagonismo dos receptores NMDA"
    ],
    correctIndex: 0,
    explanation: "Os slides enfatizam que os AL bloqueiam a condução nervosa ao inibir canais de sódio dependentes de voltagem."
  },
  {
    question: "Segundo o texto, quais são as duas vias gerais de administração dos anestésicos locais?",
    options: [
      "Endovenosa e retal",
      "Tópica e injeção (infiltrativa ou de bloqueio)",
      "Oral e subcutânea",
      "Intranasal e transdérmica",
      "Intratecal e epidural"
    ],
    correctIndex: 1,
    explanation: "O slide \"AL.\" lista aplicação tópica e injeção como rotas principais."
  },
  {
    question: "Qual das seguintes NÃO está listada como indicação dos anestésicos locais?",
    options: [
      "Cirurgias menores",
      "Lacerações de pele",
      "Alívio de dor oncológica",
      "Tratamento de hipertensão crônica",
      "Irritações de pele"
    ],
    correctIndex: 3,
    explanation: "Hipertensão não figura entre as indicações; todas as demais são citadas."
  },
  {
    question: "A classificação química divide os anestésicos locais em derivados de éster e de:",
    options: [
      "Nitrila",
      "Amida",
      "Fenol",
      "Piridina",
      "Pirazol"
    ],
    correctIndex: 1,
    explanation: "O slide “Química” menciona explicitamente derivados de amida."
  },
  {
    question: "Qual característica farmacocinética dos AL justifica a coadministração de vasoconstritores como adrenalina?",
    options: [
      "Alta ligação proteica",
      "Ação vasodilatadora intrínseca",
      "Metabolismo renal rápido",
      "pKa baixo",
      "Alta lipofilicidade"
    ],
    correctIndex: 1,
    explanation: "Por serem vasodilatadores, perdem-se rapidamente; vasoconstritor prolonga ação e reduz toxicidade."
  },
  {
    question: "Qual anestésico tópico citado atua alterando a forma do canal pela penetração na membrana celular?",
    options: [
      "Bupivacaína",
      "Benzocaína",
      "Prilocaína",
      "Mepivacaína",
      "Etidocaína"
    ],
    correctIndex: 1,
    explanation: "O slide de administração tópica menciona benzocaína com essa ação."
  },
  {
    question: "Derivados de éster são biotransformados principalmente por:",
    options: [
      "Esterases plasmáticas",
      "Citocromo P450 hepático",
      "Oxidases renais",
      "Hidrolases intestinais",
      "Descarboxilases musculares"
    ],
    correctIndex: 0,
    explanation: "A nota de rodapé indica que ésteres sofrem hidrólise por esterases plasmáticas."
  },
  {
    question: "Como o pH tecidual baixo afeta o início de ação dos anestésicos locais?",
    options: [
      "Acelera a difusão da forma apolar",
      "Aumenta a proporção ionizada, retardando a latência",
      "Não exerce influência significativa",
      "Promove precipitação do fármaco",
      "Favorece a biotransformação hepática"
    ],
    correctIndex: 1,
    explanation: "Mais forma ionizada → menos penetração na membrana → latência maior."
  },
  {
    question: "Entre os valores de pKa apresentados, qual fármaco possui latência mais rápida?",
    options: [
      "Cocaína (8,7)",
      "Procaína (8,5)",
      "Lidocaína (7,7)",
      "Bupivacaína (8,1)",
      "Ropivacaína (8,2)"
    ],
    correctIndex: 2,
    explanation: "Quanto mais próximo do pH fisiológico (≈7,4), menor latência; lidocaína tem pKa 7,7."
  },
  {
    question: "Quantos miligramas de lidocaína estão contidos em um tubete de 1,8 mL de solução a 2 %?",
    options: [
      "18 mg",
      "24 mg",
      "30 mg",
      "36 mg",
      "40 mg"
    ],
    correctIndex: 3,
    explanation: "2 % = 20 mg/mL → 20 mg × 1,8 mL = 36 mg."
  },
  {
    question: "Para um adulto de 60 kg, quantos tubetes de lidocaína a 2 % podem ser usados sem exceder a dose máxima de 4,4 mg/kg?",
    options: [
      "5 tubetes",
      "7 tubetes",
      "9 tubetes",
      "11 tubetes",
      "13 tubetes"
    ],
    correctIndex: 1,
    explanation: "Dose máx = 264 mg; cada tubete 36 mg → 264/36 ≈ 7,3 (≈ 7 tubetes)."
  },
  {
    question: "Qual propriedade NÃO faz parte da lista de características desejáveis de um anestésico local?",
    options: [
      "Bloquear reversivelmente o nervo",
      "Irritar minimamente o tecido",
      "Alta toxicidade sistêmica",
      "Início rápido",
      "Duração adequada"
    ],
    correctIndex: 2,
    explanation: "Baixa – e não alta – toxicidade sistêmica é desejável."
  },
  {
    question: "A teoria da matriz lipoproteica descreve que as moléculas dos AL:",
    options: [
      "Ativam receptores dopaminérgicos",
      "Expandem o espaço sináptico",
      "Deformam a membrana reduzindo o diâmetro dos canais de sódio",
      "Aumentam a liberação de serotonina",
      "Bloqueiam receptores rianodina"
    ],
    correctIndex: 2,
    explanation: "A primeira teoria farmacodinâmica trata do efeito físico na matriz lipoproteica."
  },
  {
    question: "Qual é o receptor neuronal diretamente bloqueado pelos anestésicos locais?",
    options: [
      "Receptores de potássio retificador",
      "Canais de sódio voltagem-dependentes",
      "Receptores GABA-B",
      "Canais de cálcio T-tipo",
      "Receptores nicotínicos"
    ],
    correctIndex: 1,
    explanation: "O bloqueio do canal de sódio impede a despolarização do nervo."
  },
  {
    question: "A principal razão clínica para adicionar vasoconstritor a um AL é:",
    options: [
      "Aumentar a lipossolubilidade do fármaco",
      "Prolongar duração e reduzir toxicidade sistêmica",
      "Alcalinizar a solução",
      "Facilitar a metabolização hepática",
      "Diminuir o pKa"
    ],
    correctIndex: 1,
    explanation: "Menor fluxo sanguíneo → menor absorção sistêmica e ação prolongada."
  },
  {
    question: "Qual das seguintes substâncias É citada como vasoconstritor adjuvante?",
    options: [
      "Atropina",
      "Adrenalina",
      "Nitroprussiato",
      "Isoproterenol",
      "Dobutamina"
    ],
    correctIndex: 1,
    explanation: "Adrenalina é exemplo de simpatomimético listado."
  },
  {
    question: "Entre os efeitos adversos centrais dos AL encontramos:",
    options: [
      "Delírios e convulsões em doses elevadas",
      "Neutropenia febril",
      "Hipotireoidismo",
      "Insuficiência hepática fulminante",
      "Tremor parkinsoniano primário"
    ],
    correctIndex: 0,
    explanation: "O slide de efeitos adversos cita delírios e convulsões."
  },
  {
    question: "No bloqueio por infiltração, o efeito do AL se restringe principalmente a:",
    options: [
      "Toda medula espinhal",
      "A área imediatamente ao redor das terminações nervosas sensoriais",
      "Os gânglios autonômicos",
      "O córtex somatossensorial",
      "O sistema límbico"
    ],
    correctIndex: 1,
    explanation: "Infiltração interrompe condução local antes que o impulso atinja o SNC."
  },
  {
    question: "Qual das alternativas descreve CORRETAMENTE a estrutura química básica de um AL?",
    options: [
      "Grupo aromático – ligação peptídica – grupo fosfato",
      "Cadeia carbônica – grupo éster – anel triazol",
      "Grupo lipofílico – cadeia intermediária (éster/amida) – grupo amino hidrofílico",
      "Anel imidazol – ponte dissulfeto – grupo aldeído",
      "Cadeia poliênica – nitrila terminal – grupo etanolamina"
    ],
    correctIndex: 2,
    explanation: "Os três componentes essenciais são lipofílico, cadeia e grupo amino hidrofílico."
  },
  {
    question: "Os anestésicos locais são quimicamente classificados como:",
    options: [
      "Ácidos fortes",
      "Bases fracas",
      "Sais neutros",
      "Ácidos graxos",
      "Amidas neutras"
    ],
    correctIndex: 1,
    explanation: "O texto explica que AL são bases fracas, tornando-se sais ao adicionar HCl."
  },

  /* ---- Perguntas de raciocínio (10) ---- */
  {
    question: "Raciocínio: Um paciente com doença hepática avançada requer anestesia local prolongada. Qual classe oferece MENOR risco de toxicidade acumulada?",
    options: [
      "Derivados de éster",
      "Derivados de amida",
      "Opioides tópicos",
      "Benzodiazepínicos",
      "Anestésicos gerais halogenados"
    ],
    correctIndex: 0,
    explanation: "Ésteres são metabolizados por esterases plasmáticas, não sobrecarregando o fígado."
  },
  {
    question: "Raciocínio: Em tecido inflamado (pH ≈ 6,5), qual consequência clínica é esperada ao injetar lidocaína?",
    options: [
      "Bloqueio mais rápido e potente",
      "Latência aumentada e anestesia menos eficaz",
      "Duração duplicada do efeito",
      "Conversão de lidocaína em metabólito ativo no local",
      "Ação indiferente ao pH"
    ],
    correctIndex: 2,
    explanation: "pH baixo favorece forma ionizada → menor difusão → latência maior e eficácia menor."
  },
  {
    question: "Raciocínio: Quantos mililitros de lidocaína a 2 % podem ser administrados com segurança a uma criança de 20 kg (dose máxima 4,4 mg/kg)?",
    options: [
      "2 mL",
      "4 mL",
      "6 mL",
      "8 mL",
      "10 mL"
    ],
    correctIndex: 3,
    explanation: "Dose máx = 88 mg; 20 mg/mL → 88/20 = 4,4 mL (≈ 8 mL de solução em dois tubetes de 1,8 mL)."
  },
  {
    question: "Raciocínio: Para prolongar a anestesia e minimizar sangramento em um pequeno ferimento, qual combinação é correta?",
    options: [
      "Lidocaína + nitroglicerina",
      "Prilocaína + adrenalina",
      "Bupivacaína + histamina",
      "Mepivacaína + isoproterenol",
      "Cocaína tópica isolada"
    ],
    correctIndex: 1,
    explanation: "Adrenalina vasoconstritora mantém o AL no local e reduz sangramento."
  },
  {
    question: "Raciocínio: Qual anestésico exibirá latência MAIOR em um tecido de pH 7,3, dado seu pKa?",
    options: [
      "Mepivacaína (7,6)",
      "Lidocaína (7,7)",
      "Bupivacaína (8,1)",
      "Prilocaína (7,8)",
      "Cocaína (8,7)"
    ],
    correctIndex: 4,
    explanation: "Quanto mais alto o pKa em relação ao pH, maior proporção ionizada → maior latência; cocaína 8,7 é a maior."
  },
  {
    question: "Raciocínio: Se um paciente apresentar convulsões após dose excessiva de anestésico local, o tratamento inicial indicado é:",
    options: [
      "Administrar benzodiazepínico e suporte ventilatório",
      "Injetar mais anestésico local para dessensibilização",
      "Aplicar adrenalina IV em bolus",
      "Induzir diurese osmótica",
      "Realizar hiperventilação com CO₂"
    ],
    correctIndex: 0,
    explanation: "Tratamento sintomático: benzodiazepínicos para convulsões e suporte respiratório."
  },
  {
    question: "Raciocínio: Qual fator justifica usar bupivacaína em bloqueios que necessitam longa duração apesar de início mais lento?",
    options: [
      "Menor potência analgésica",
      "Metabolismo exclusivamente renal",
      "Alta lipossolubilidade que prolonga a permanência no nervo",
      "Baixa ligação proteica",
      "Capacidade de reduzir pH local"
    ],
    correctIndex: 2,
    explanation: "Maior lipofilicidade e ligação proteica prolongam a ação apesar da latência moderada."
  },
  {
    question: "Raciocínio: Durante infiltração, o paciente sente taquicardia intensa logo após injeção. A causa mais provável é:",
    options: [
      "Passagem de AL para circulação cerebral",
      "Uso inadvertido de vasoconstritor em bolus intravascular",
      "Reação de hipersensibilidade ao éster",
      "Hipoglicemia induzida pelo AL",
      "Formação de meta-hemoglobina"
    ],
    correctIndex: 1,
    explanation: "Adrenalina intravascular provoca taquicardia súbita."
  },
  {
    question: "Raciocínio: Para anestesia tópica de mucosa oral em paciente alérgico a ésteres, qual alternativa segura e eficaz?",
    options: [
      "Benzocaína",
      "Tetracaína",
      "Lidocaína gel",
      "Procaína",
      "Cloroprocaína"
    ],
    correctIndex: 2,
    explanation: "Lidocaína é amida, evitando reação cruzada com ésteres como benzocaína/procaína."
  },
  {
    question: "Raciocínio: Qual estratégia reduz o risco de toxicidade sistêmica em infiltrações extensas com lidocaína?",
    options: [
      "Aumentar o pH da solução para 9,0",
      "Administrar lentamente, aspirando antes da injeção e usando vasoconstritor",
      "Diluir com dextrose 50 %",
      "Usar calor local para vasodilatar",
      "Preferir via intra-arterial"
    ],
    correctIndex: 1,
    explanation: "Aspiração evita injeção intravascular e vasoconstritor reduz absorção sistêmica."
  },
 {
    question: "Qual via dopaminérgica está mais relacionada à gênese das alucinações na esquizofrenia, segundo a hipótese dopaminérgica?",
    options: ["Mesolímbica", "Mesocortical", "Nigroestriatal", "Tuberoinfundibular", "Corticospinal"],
    correctIndex: 0,
    explanation: "O material associa a hiperatividade dopaminérgica da via mesolímbica aos sintomas positivos, como alucinações."
  },
  {
    question: "O bloqueio de receptores D2 na via nigroestriatal está diretamente ligado ao desenvolvimento de qual efeito adverso?",
    options: [
      "Síndrome extrapiramidal",
      "Sedação intensa",
      "Agranulocitose",
      "Ganho de peso",
      "Prolongamento do intervalo QT"
    ],
    correctIndex: 0,
    explanation: "A via nigroestriatal controla os movimentos. Seu bloqueio por antipsicóticos típicos gera sintomas extrapiramidais."
  },
  {
    question: "Entre os antipsicóticos atípicos listados, qual é considerado tratamento de escolha para esquizofrenia refratária?",
    options: ["Clozapina", "Haloperidol", "Risperidona", "Olanzapina", "Ziprasidona"],
    correctIndex: 0,
    explanation: "O texto destaca a clozapina com três asteriscos como opção para casos refratários."
  },
  {
    question: "Qual neurotransmissor, além da dopamina, tem seus receptores 5-HT2A bloqueados pelos antipsicóticos atípicos?",
    options: ["Serotonina", "Noradrenalina", "GABA", "Acetilcolina", "Glutamato"],
    correctIndex: 0,
    explanation: "Os atípicos exercem antagonismo significativo em receptores 5-HT2A de serotonina."
  },
  {
    question: "Segundo a epidemiologia apresentada, a esquizofrenia afeta aproximadamente que porcentagem da população mundial?",
    options: ["1 %", "5 %", "10 %", "0,1 %", "20 %"],
    correctIndex: 0,
    explanation: "O slide refere prevalência de 1 % mundialmente."
  },
  {
    question: "Qual das seguintes NÃO é listada como indicação clínica para uso de antipsicóticos?",
    options: [
      "Transtorno bipolar",
      "Delirium ou demência",
      "Hipertensão essencial",
      "Transtorno de estresse pós-traumático",
      "Esquizofrenia"
    ],
    correctIndex: 2,
    explanation: "Hipertensão não consta entre as indicações terapêuticas descritas."
  },
  {
    question: "A síndrome extrapiramidal inclui todos os sintomas abaixo, EXCETO:",
    options: ["Acatisia", "Distonias agudas", "Discinesia tardia", "Hipertensão arterial", "Tremor parkinsoniano"],
    correctIndex: 3,
    explanation: "Hipertensão não faz parte da lista de manifestações motoras da SEP."
  },
  {
    question: "Qual família química contém o antipsicótico típico haloperidol?",
    options: ["Butirofenonas", "Fenotiazinas", "Diazepínicos", "Tioxantinas", "Imidazolidinas"],
    correctIndex: 0,
    explanation: "Haloperidol pertence às butirofenonas, conforme slide de fármacos típicos."
  },
  {
    question: "Que efeito adverso endócrino decorre do bloqueio da via tuberoinfundibular pelos antipsicóticos típicos?",
    options: [
      "Hiperprolactinemia",
      "Hipotireoidismo",
      "Hipercortisolismo",
      "Hipoglicemia",
      "Hipercalcemia"
    ],
    correctIndex: 0,
    explanation: "A dopamina inibe prolactina; seu bloqueio eleva a secreção e causa hiperprolactinemia."
  },
  {
    question: "Dos seguintes antipsicóticos atípicos, qual é descrito como associado a prolongamento do intervalo QT?",
    options: ["Ziprasidona", "Aripiprazol", "Quetiapina", "Olanzapina", "Clozapina"],
    correctIndex: 0,
    explanation: "O quadro de efeitos adversos menciona alterações eletrocardiográficas em ziprasidona."
  },
  {
    question: "Qual receptor dopaminérgico tem ocupação pós-sináptica de 70–80 % pelos antipsicóticos típicos?",
    options: ["D2", "D3", "D1", "D4", "D5"],
    correctIndex: 0,
    explanation: "Os fármacos típicos atuam com alta afinidade e ocupação em receptores D2."
  },
  {
    question: "A hipótese dopaminérgica propõe hiperatividade de dopamina em qual sistema para explicar sintomas positivos?",
    options: [
      "Mesolímbico",
      "Mesocortical",
      "Nigroestriatal",
      "Sistema reticular ativador",
      "Cerebelo-vestibular"
    ],
    correctIndex: 0,
    explanation: "O excesso de dopamina mesolímbica estaria ligado a delírios e alucinações."
  },
  {
    question: "Quais são os dois principais grupos de sintomas descritos na esquizofrenia?",
    options: [
      "Agudos e crônicos",
      "Positivos e negativos",
      "Sensoriais e motores",
      "Cardíacos e endócrinos",
      "Primários e secundários"
    ],
    correctIndex: 1,
    explanation: "O material diferencia sintomas positivos (alucinações, delírios) e negativos (apatia, retraimento)."
  },
  {
    question: "Qual neurotransmissor excitatório é citado na via mesocortical com receptor 5-HT2A facilitador?",
    options: ["Glutamato", "Glicina", "Histamina", "Aspartato", "Melatonina"],
    correctIndex: 0,
    explanation: "O slide da via mesocortical refere glutamato mediado por 5-HT2A."
  },
  {
    question: "A agranulocitose é um efeito adverso marcante de qual antipsicótico atípico?",
    options: ["Clozapina", "Paliperidona", "Aripiprazol", "Olanzapina", "Risperidona"],
    correctIndex: 0,
    explanation: "O quadro ressalta agranulocitose como risco exclusivo importante da clozapina."
  },
  {
    question: "Qual dos itens abaixo é considerado sintoma negativo da esquizofrenia?",
    options: ["Afeto embotado", "Delírio persecutório", "Alucinação auditiva", "Fala desorganizada", "Comportamento bizarro"],
    correctIndex: 0,
    explanation: "Isolamento social e afeto reduzido se enquadram nos sintomas negativos."
  },
  {
    question: "Qual antipsicótico típico derivado de fenotiazina foi originalmente desenvolvido a partir de anti-histamínicos H1?",
    options: ["Clorpromazina", "Haloperidol", "Pimozida", "Tiotixeno", "Flufenazina"],
    correctIndex: 0,
    explanation: "A clorpromazina é citada como derivada dos anti-histamínicos e primeiro neuroléptico."
  },
  {
    question: "Entre os neurotransmissores listados, qual NÃO é diretamente mencionado como envolvido na fisiopatologia da psicose?",
    options: ["Serotonina", "GABA", "Noradrenalina", "Dopamina", "Glutamato"],
    correctIndex: 2,
    explanation: "O texto destaca dopamina, glutamato, serotonina e GABA; noradrenalina apenas em efeitos colaterais."
  },
  {
    question: "Qual classe de antipsicóticos apresenta menor incidência de síndrome extrapiramidal por bloquear D2 em menor grau e antagonizar 5-HT2A?",
    options: [
      "Antipsicóticos atípicos",
      "Antipsicóticos típicos",
      "Ansiolíticos benzodiazepínicos",
      "Butirofenonas",
      "Fenotiazinas"
    ],
    correctIndex: 0,
    explanation: "A característica definidora dos atípicos é menor SEP devido a perfil receptor mais equilibrado."
  },
  {
    question: "Dos antipsicóticos típicos abaixo, qual pertence ao grupo das tioxantinas?",
    options: ["Tiotixeno", "Flufenazina", "Haloperidol", "Pimozida", "Clorpromazina"],
    correctIndex: 0,
    explanation: "Tiotixeno é classificado especificamente como tioxantina."
  },

  /* ------------ 10 perguntas de raciocínio ------------ */
  {
    question: "Paciente jovem apresenta sintomas positivos intensos e importante agitação. Qual antipsicótico típico de alta potência, listado no material, pode controlar rapidamente esses sintomas mas envolve maior risco de SEP?",
    options: ["Haloperidol", "Clozapina", "Quetiapina", "Olanzapina", "Ziprasidona"],
    correctIndex: 0,
    explanation: "Haloperidol, uma butirofenona de alta potência, é frequentemente usado para agitação aguda, mas gera SEP."
  },
  {
    question: "Um paciente tratado com antipsicótico típico desenvolve tremor, rigidez e bradicinesia. Qual conduta farmacológica inicial é mais apropriada?",
    options: [
      "Adicionar biperideno (anticolinérgico)",
      "Aumentar a dose do antipsicótico",
      "Introduzir um inibidor de MAO",
      "Trocar para clozapina imediatamente",
      "Suspender todo e qualquer antipsicótico"
    ],
    correctIndex: 0,
    explanation: "Os parkinsonismos induzidos por bloqueio nigroestriatal respondem a anticolinérgicos como biperideno."
  },
  {
    question: "Se um paciente em uso de risperidona apresenta ginecomastia dolorosa, qual mecanismo explica o efeito e qual estratégia é coerente?",
    options: [
      "Bloqueio tuberoinfundibular D2; reduzir a dose ou migrar para atípico com menor prolactina (ex. aripiprazol)",
      "Ativação de receptores 5-HT2A; adicionar sertralina",
      "Bloqueio H1; trocar por haloperidol",
      "Estímulo de D1; manter conduta e observar",
      "Inibição de NMDA; administrar vitamina D"
    ],
    correctIndex: 0,
    explanation: "Hiperprolactinemia decorre de bloqueio D2 hipotalâmico; mudança para droga de menor impacto é indicada."
  },
  {
    question: "Um esquizofrênico refratário falhou a dois antipsicóticos atípicos. Segundo o material, qual droga iniciar e qual monitorização essencial?",
    options: [
      "Clozapina; hemograma seriado para agranulocitose",
      "Haloperidol; monitorar função hepática",
      "Olanzapina; controle de potássio",
      "Ziprasidona; audiometria mensal",
      "Aripiprazol; densitometria óssea"
    ],
    correctIndex: 0,
    explanation: "Clozapina é reservada para refratários, mas requer hemograma frequente pelo risco de agranulocitose."
  },
  {
    question: "Paciente idoso com demência necessita controle de agitação mas já tem prolongamento do QT. Qual antipsicótico atípico da lista é menos provável de agravar o intervalo QT?",
    options: ["Aripiprazol", "Ziprasidona", "Haloperidol", "Quetiapina", "Clozapina"],
    correctIndex: 0,
    explanation: "Ziprasidona prolonga QT; aripiprazol mostra baixo impacto eletrocardiográfico."
  },
  {
    question: "Durante internação, um paciente em haloperidol desenvolve febre alta, rigidez muscular generalizada e CPK elevada. Qual diagnóstico sindrômico e primeira medida?",
    options: [
      "Síndrome neuroléptica maligna; suspender haloperidol e iniciar dantroleno",
      "Hipertermia maligna; administrar suxametônio",
      "SEP leve; aguardar evolução",
      "Agranulocitose; iniciar G-CSF",
      "Serotoninergia; dar ondansetrona"
    ],
    correctIndex: 0,
    explanation: "A síndrome neuroléptica maligna exige retirar o agente e tratamento com dantroleno/bromocriptina."
  },
  {
    question: "Um paciente sob clozapina ganha 10 kg em três meses. Qual mecanismo receptor provável e medida prática recomendada?",
    options: [
      "Bloqueio H1 e 5-HT2C; orientações de dieta e atividade física, monitorar glicemia",
      "Bloqueio D4; adicionar metformina sempre",
      "Ativação 5-HT1A; suspender imediatamente a clozapina",
      "Bloqueio α1; usar diurético tiazídico",
      "Inibição NMDA; trocar por haloperidol"
    ],
    correctIndex: 0,
    explanation: "Ganho de peso resulta de bloqueio histamínico e serotoninérgico; manejo envolve estilo de vida e vigilância metabólica."
  },
  {
    question: "Para um paciente com muitos sintomas negativos e efeitos extrapiramidais prévios, qual perfil de antipsicótico é desejável?",
    options: [
      "Atípico com antagonismo 5-HT2A/D2 equilibrado, p.ex. quetiapina",
      "Típico de alta potência",
      "Butirofenona em dose baixa",
      "Fenotiazina sedativa",
      "Tioxantina parenteral"
    ],
    correctIndex: 0,
    explanation: "Atípicos melhoram negativos e têm menos SEP, sendo apropriados para tal quadro clínico."
  },
  {
    question: "Um paciente diabético tipo 2 começa olanzapina. Qual risco metabólico deve ser enfatizado e qual acompanhamento sugerido?",
    options: [
      "Ganho de peso/hiperglicemia; controle de glicemia e HbA1c periódicos",
      "Hiponatremia; sódio semanal",
      "Hiperprolactinemia; dosar prolactina diária",
      "Neutropenia; hemograma diário",
      "Hipocalemia; potássio mensal"
    ],
    correctIndex: 0,
    explanation: "Olanzapina pode exacerbar síndrome metabólica, exigindo acompanhamento glicêmico."
  },
  {
    question: "Quais dois neurotransmissores são alvo principal dos antipsicóticos atípicos para reduzir tanto sintomas positivos quanto negativos, conforme apresentado?",
    options: [
      "Dopamina (D2) e serotonina (5-HT2A)",
      "GABA e glicina",
      "Noradrenalina e acetilcolina",
      "Histamina e melatonina",
      "Glutamato e aspartato"
    ],
    correctIndex: 0,
    explanation: "O perfil duplo de antagonismo D2/5-HT2A define os atípicos e amplia o espectro de melhora sintomática."
  }
  ];
  
// === ADMINISTRAÇÃO DO QUIZ COM PERSISTÊNCIA ===

  // VAR globais
  let currentQuestionIndex = 0, 
      score = 0, 
      userAnswers = [], 
      seconds = 0, 
      timerInterval, 
      questionAnswered = false;
  
  // Chaves para localStorage - AGORA COM IDENTIFICADOR ÚNICO
  const STORAGE_KEYS = {
    CURRENT_QUESTION: `quiz_${QUIZ_ID}_current_question`,
    SCORE: `quiz_${QUIZ_ID}_score`,
    USER_ANSWERS: `quiz_${QUIZ_ID}_user_answers`,
    SECONDS: `quiz_${QUIZ_ID}_seconds`,
    USERNAME: `quiz_${QUIZ_ID}_username`,
    QUIZ_IN_PROGRESS: `quiz_${QUIZ_ID}_in_progress`
  };

  // DOM
  const startSection = document.getElementById('start-section');
  const quizSection = document.getElementById('quiz-section');
  const resultsSection = document.getElementById('results-section');
  const startButton = document.getElementById('start-button');
  const continueButton = document.getElementById('continue-button');
  const clearProgressButton = document.getElementById('clear-progress-button');
  const nextButton = document.getElementById('next-button');
  const restartButton = document.getElementById('restart-button');
  const usernameInput = document.getElementById('username');
  const questionNumber = document.getElementById('question-number');
  const questionText = document.getElementById('question-text');
  const optionsContainer = document.getElementById('options-container');
  const explanationContainer = document.getElementById('explanation');
  const timerElement = document.getElementById('timer');
  const finalScore = document.getElementById('final-score');
  const finalTime = document.getElementById('final-time');
  const questionsList = document.getElementById('questions-list');
  const leaderboardBody = document.getElementById('leaderboard-body');

  // Funções de persistência
  function saveQuizState() {
    localStorage.setItem(STORAGE_KEYS.CURRENT_QUESTION, currentQuestionIndex);
    localStorage.setItem(STORAGE_KEYS.SCORE, score);
    localStorage.setItem(STORAGE_KEYS.USER_ANSWERS, JSON.stringify(userAnswers));
    localStorage.setItem(STORAGE_KEYS.SECONDS, seconds);
    localStorage.setItem(STORAGE_KEYS.USERNAME, usernameInput.value);
    localStorage.setItem(STORAGE_KEYS.QUIZ_IN_PROGRESS, 'true');
  }

  function loadQuizState() {
    if (localStorage.getItem(STORAGE_KEYS.QUIZ_IN_PROGRESS) === 'true') {
      currentQuestionIndex = parseInt(localStorage.getItem(STORAGE_KEYS.CURRENT_QUESTION));
      score = parseInt(localStorage.getItem(STORAGE_KEYS.SCORE));
      userAnswers = JSON.parse(localStorage.getItem(STORAGE_KEYS.USER_ANSWERS));
      seconds = parseInt(localStorage.getItem(STORAGE_KEYS.SECONDS));
      const savedUsername = localStorage.getItem(STORAGE_KEYS.USERNAME);
      if (savedUsername) {
        usernameInput.value = savedUsername;
      }
      return true;
    }
    return false;
  }

  function clearQuizState() {
    localStorage.removeItem(STORAGE_KEYS.CURRENT_QUESTION);
    localStorage.removeItem(STORAGE_KEYS.SCORE);
    localStorage.removeItem(STORAGE_KEYS.USER_ANSWERS);
    localStorage.removeItem(STORAGE_KEYS.SECONDS);
    localStorage.removeItem(STORAGE_KEYS.USERNAME);
    localStorage.removeItem(STORAGE_KEYS.QUIZ_IN_PROGRESS);
  }

  // Verificar se há um quiz em andamento ao carregar a página
  function checkSavedQuiz() {
    if (localStorage.getItem(STORAGE_KEYS.QUIZ_IN_PROGRESS) === 'true') {
      continueButton.style.display = 'block';
      clearProgressButton.style.display = 'block';
      
      // Carregar o nome do usuário se estiver salvo
      const savedUsername = localStorage.getItem(STORAGE_KEYS.USERNAME);
      if (savedUsername) {
        usernameInput.value = savedUsername;
      }
    } else {
      continueButton.style.display = 'none';
      clearProgressButton.style.display = 'none';
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    startButton.addEventListener('click', startQuiz);
    continueButton.addEventListener('click', continueQuiz);
    clearProgressButton.addEventListener('click', clearProgress);
    nextButton.addEventListener('click', nextQuestion);
    restartButton.addEventListener('click', restartQuiz);
    
    // Verificar se existe um quiz em andamento
    checkSavedQuiz();
  });

  function startQuiz() {
    if (!usernameInput.value.trim()) { 
      alert('Digite seu nome.'); 
      return; 
    }
    
    // Limpar qualquer quiz salvo anteriormente
    clearQuizState();
    
    // Inicializar novo quiz
    currentQuestionIndex = 0;
    score = 0;
    userAnswers = [];
    seconds = 0;
    
    startSection.classList.remove('active');
    quizSection.classList.add('active');
    timerElement.style.display = 'block';
    timerInterval = setInterval(() => { 
      seconds++; 
      updateTimer();
      // Salvar estado a cada 10 segundos
      if (seconds % 10 === 0) {
        saveQuizState();
      }
    }, 1000);
    
    loadQuestion();
    saveQuizState();
  }

  function continueQuiz() {
    if (loadQuizState()) {
      startSection.classList.remove('active');
      quizSection.classList.add('active');
      timerElement.style.display = 'block';
      timerInterval = setInterval(() => { 
        seconds++; 
        updateTimer();
        // Salvar estado a cada 10 segundos
        if (seconds % 10 === 0) {
          saveQuizState();
        }
      }, 1000);
      
      loadQuestion();
      
      // Se a questão já foi respondida, exibir explicação e botão de próxima
      if (currentQuestionIndex < userAnswers.length) {
        const answerData = userAnswers.find(ans => ans.questionIndex === currentQuestionIndex);
        if (answerData) {
          questionAnswered = true;
          const options = optionsContainer.children;
          const q = questions[currentQuestionIndex];
          
          // Marcar opção correta e incorreta se aplicável
          options[q.correctIndex].classList.add('correct');
          if (answerData.userAnswerIndex !== q.correctIndex) {
            options[answerData.userAnswerIndex].classList.add('incorrect');
          }
          
          // Mostrar explicação e botão de próxima questão
          explanationContainer.textContent = q.explanation;
          explanationContainer.style.display = 'block';
          nextButton.textContent = currentQuestionIndex < questions.length - 1 ? 'Próxima Questão' : 'Ver Resultados';
          nextButton.style.display = 'block';
        }
      }
    }
  }

  function clearProgress() {
    if (confirm('Tem certeza que deseja limpar seu progresso salvo?')) {
      clearQuizState();
      continueButton.style.display = 'none';
      clearProgressButton.style.display = 'none';
    }
  }

  function updateTimer() {
    const m = Math.floor(seconds / 60), s = seconds % 60;
    timerElement.textContent = `${m < 10 ? '0' + m : m}:${s < 10 ? '0' + s : s}`;
  }

  function loadQuestion() {
    questionAnswered = false;
    explanationContainer.style.display = 'none';
    nextButton.style.display = 'none';
    
    const q = questions[currentQuestionIndex];
    questionNumber.textContent = `Questão ${currentQuestionIndex + 1} de ${questions.length}`;
    questionText.textContent = q.question;
    optionsContainer.innerHTML = '';
    
    const letters = ['a', 'b', 'c', 'd', 'e'];
    q.options.forEach((opt, i) => {
      const div = document.createElement('div');
      div.className = 'option';
      div.textContent = `${letters[i]}) ${opt}`;
      div.onclick = () => selectOption(i);
      optionsContainer.appendChild(div);
    });
  }

  function selectOption(i) {
    if (questionAnswered) return;
    
    questionAnswered = true;
    const q = questions[currentQuestionIndex];
    const opts = optionsContainer.children;
    opts[q.correctIndex].classList.add('correct');
    
    const isCorrect = i === q.correctIndex;
    if (!isCorrect) opts[i].classList.add('incorrect');
    if (isCorrect) score++;
    
    // Verificar se já existia uma resposta para esta questão
    const existingAnswerIndex = userAnswers.findIndex(ans => ans.questionIndex === currentQuestionIndex);
    
    if (existingAnswerIndex !== -1) {
      // Atualizar resposta existente
      userAnswers[existingAnswerIndex] = { 
        questionIndex: currentQuestionIndex, 
        userAnswerIndex: i, 
        isCorrect 
      };
    } else {
      // Adicionar nova resposta
      userAnswers.push({ 
        questionIndex: currentQuestionIndex, 
        userAnswerIndex: i, 
        isCorrect 
      });
    }
    
    explanationContainer.textContent = q.explanation;
    explanationContainer.style.display = 'block';
    nextButton.textContent = currentQuestionIndex < questions.length - 1 ? 'Próxima Questão' : 'Ver Resultados';
    nextButton.style.display = 'block';
    
    // Salvar estado após responder
    saveQuizState();
  }

  function nextQuestion() {
    currentQuestionIndex++;
    if (currentQuestionIndex < questions.length) {
      loadQuestion();
      saveQuizState();
    } else {
      finishQuiz();
    }
  }

  function finishQuiz() {
    clearInterval(timerInterval);
    quizSection.classList.remove('active');
    resultsSection.classList.add('active');
    timerElement.style.display = 'none';
    
    finalScore.textContent = `Você acertou ${score} de ${questions.length} questões`;
    finalTime.textContent = `Tempo total: ${timerElement.textContent}`;
    
    displayUserAnswers();
    sendResultToBackend();
    loadLeaderboard();
    
    // Limpar estado salvo ao finalizar o quiz
    clearQuizState();
  }

  function displayUserAnswers() {
    questionsList.innerHTML = '';
    const letters = ['a', 'b', 'c', 'd', 'e'];
    
    userAnswers.forEach((ans, idx) => {
      const q = questions[ans.questionIndex];
      const item = document.createElement('div');
      item.className = 'question-list-item';
      item.innerHTML = `
        <div>
          <strong>Questão ${idx + 1}:</strong>
          Você marcou <span class="${ans.isCorrect ? 'text-success' : 'text-danger'}">
          ${letters[ans.userAnswerIndex]}</span>, correta era <span class="text-success">
          ${letters[q.correctIndex]}</span>
        </div>
      `;
      
      const detail = document.createElement('div');
      detail.className = 'question-detail';
      detail.innerHTML = `
        <p><strong>${q.question}</strong></p>
        ${q.options.map((opt, i) => `
          <div class="option ${i === q.correctIndex ? 'correct' : ''} ${i === ans.userAnswerIndex && i !== q.correctIndex ? 'incorrect' : ''}">
            ${letters[i]}) ${opt}
          </div>
        `).join('')}
        <div class="explanation" style="display:block;">${q.explanation}</div>
      `;
      
      item.onclick = () => detail.style.display = detail.style.display === 'block' ? 'none' : 'block';
      item.appendChild(detail);
      questionsList.appendChild(item);
    });
  }

  // Funções para leaderboard e backend

  function resultadoInserido(res) {
    console.log('Inserido:', res);
    loadLeaderboard();
  }

  function sendResultToBackend() {
    // Implementar lógica de envio para backend se necessário
    // Exemplo: enviar via API ou registrar localmente
    try {
      // Se existir um método específico para enviar resultados ao backend, use-o aqui
      // Caso contrário, pode-se implementar uma solução local usando localStorage
      
      const leaderboardData = JSON.parse(localStorage.getItem(`quiz_${QUIZ_ID}_leaderboard`) || '[]');
      const newResult = {
        usuario: usernameInput.value,
        pontuacao: score,
        tempo: seconds
      };
      
      leaderboardData.push(newResult);
      // Ordenar por pontuação (decrescente) e depois por tempo (crescente)
      leaderboardData.sort((a, b) => {
        if (b.pontuacao !== a.pontuacao) return b.pontuacao - a.pontuacao;
        return a.tempo - b.tempo;
      });
      
      localStorage.setItem(`quiz_${QUIZ_ID}_leaderboard`, JSON.stringify(leaderboardData));
      
      // Chamar função que atualiza a tabela
      atualizaLeaderboard(leaderboardData);
    } catch (error) {
      console.error('Erro ao salvar resultado:', error);
    }
  }

  function loadLeaderboard() {
    try {
      // Carregar dados do leaderboard do localStorage com o QUIZ_ID específico
      const leaderboardData = JSON.parse(localStorage.getItem(`quiz_${QUIZ_ID}_leaderboard`) || '[]');
      atualizaLeaderboard(leaderboardData);
    } catch (error) {
      console.error('Erro ao carregar leaderboard:', error);
    }
  }

  function atualizaLeaderboard(data) {
    leaderboardBody.innerHTML = '';
    data.forEach((e, i) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${i + 1}</td><td>${e.usuario}</td><td>${e.pontuacao}</td><td>${e.tempo < 60 ? '00:' + ('0' + e.tempo).slice(-2) : Math.floor(e.tempo / 60).toString().padStart(2, '0') + ':' + ('0' + e.tempo % 60).slice(-2)}</td>`;
      leaderboardBody.appendChild(tr);
    });
  }

  function restartQuiz() {
    clearQuizState();
    resultsSection.classList.remove('active');
    startSection.classList.add('active');
    usernameInput.value = '';
    checkSavedQuiz();
    usernameInput.focus();
  }

  // Adicionar evento para salvar o estado quando a página for fechada
  window.addEventListener('beforeunload', () => {
    if (quizSection.classList.contains('active')) {
      saveQuizState();
    }
  });
</script>

</body>
</html>